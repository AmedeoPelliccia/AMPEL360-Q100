# ═══════════════════════════════════════════════════════════════════════════════
# _derivation.yaml — KNU-28-00-001-REQ-001 Derivation Metadata
# ═══════════════════════════════════════════════════════════════════════════════
# Purpose: Documents WHY this KNU exists and its traceability lineage
# Schema: ../LC04_DESIGN_DEFINITION/_derivation.schema.yaml
# Last Updated: 2026-01-16
# ═══════════════════════════════════════════════════════════════════════════════

schema_version: "1.0.0"

# ─────────────────────────────────────────────────────────────────────────────
# KNU Identity (Full ATA Subject Hierarchy)
# ─────────────────────────────────────────────────────────────────────────────
knu_id:
  legacy_id: "KNU-28-00-001-REQ-001"
  normalized_id: "KNU-28-00-001-LC02-00-00-00-SYSTEM_GENERAL_REQ"
  ata_address:
    chapter: "28"        # ATA Chapter: Fuel
    section: "00"        # ATA Section: General
    subject: "00"        # Subject: General
    sub_subject: "00"    # Sub-subject: General
    sub_sub_subject: "00" # Sub-sub-subject: General
    full_address: "28-00-00-00-00"
  title: "Fuel System Requirements - ATA 28 General"
  dmc_mapping: "DMC-AMPEL360-28-00-00-00-00-00A-001A-A"

# ─────────────────────────────────────────────────────────────────────────────
# Genesis Provenance (Y-KNOT Lineage)
# ─────────────────────────────────────────────────────────────────────────────
genesis_provenance:
  o_knot_ref:
    knot_id: "O-KNOT-28-00-001"
    title: "Organizational Fuel System Requirements"
    description: "AMPEL organizational policy for LH₂ fuel systems"
    location: "../O-KNOT/O-KNOT-28-00-001/"
  
  y_knot_ref:
    knot_id: "Y-KNOT-28-00-001-001"
    title: "Fuel System Genesis Provenance"
    description: "Heritage analysis and technology choices for Q100 fuel system"
    location: "../Y-KNOT/Y-KNOT-28-00-001-001/"
    heritage_sources:
      - "Airbus A380 fuel system architecture (conventional Jet-A)"
      - "NASA X-57 Maxwell electric propulsion"
      - "DLR HY4 hydrogen fuel cell aircraft"
      - "SAE AIR6464 hydrogen storage guidance"
      - "AMPEL C2 cryogenic technology innovation"

# ─────────────────────────────────────────────────────────────────────────────
# Derivation Lineage (Answers: "Why does this KNU exist?")
# ─────────────────────────────────────────────────────────────────────────────
derivation_lineage:
  parent_knot:
    knot_id: "KNOT-28-00-001"
    sequence_number: 1
    title: "General Requirements"
  
  derivation_type: BASELINE
  
  rationale: |
    AMPEL360 Q100 requires a complete fuel system design for liquid hydrogen (LH₂) 
    propulsion. This KNU establishes top-level requirements for:
    - LH₂ storage using Circular Cryogenic Cell (C2) technology
    - Cryogenic fuel distribution and management
    - Safety systems (leak detection, emergency jettison)
    - Compliance with CS-25 and hydrogen-specific standards (SAE AIR6464, AS6858)
    
    This KNU addresses KNOT-28-00-001 problem statement and spawns subsystem 
    requirements for storage (28-10), distribution (28-20), dump (28-30), 
    and indication (28-40).
  
  parent_knus:
    - knu_id: "KNU-00-00-005-REQ-001"
      relationship: depends_on
      description: "Unit system requirements (cryogenic temperature conventions K vs °C)"

# ─────────────────────────────────────────────────────────────────────────────
# Lifecycle Binding
# ─────────────────────────────────────────────────────────────────────────────
lifecycle_binding:
  lifecycle_category: LC02
  rec: "LC02_SYSTEM_REQUIREMENTS"
  artifact_type: REQ
  artifact_class: SSOT

# ─────────────────────────────────────────────────────────────────────────────
# Creation Record (Immutable)
# ─────────────────────────────────────────────────────────────────────────────
creation_record:
  created_utc: "2026-01-16T19:10:00Z"
  created_by: "STK_SE"
  baseline_version: "I01-R01"

# ─────────────────────────────────────────────────────────────────────────────
# TBD Resolution Record (Collocated Lineage)
# ─────────────────────────────────────────────────────────────────────────────
tbd_resolution:
  resolved_tbds: []
  
  spawned_tbds: []

# ─────────────────────────────────────────────────────────────────────────────
# Node Task Reference (Downstream Action Tracking)
# ─────────────────────────────────────────────────────────────────────────────
node_task_reference:
  downstream_artifacts:
    - target_knu_id: "KNU-28-00-001-SAF-001"
      relationship: spawns
      trigger_condition: "Upon REQ-001 baseline"
      status: SPAWNED
      notes: "System safety analysis (FMEA, FHA, SSA) for fuel system"
    
    - target_knu_id: "KNU-28-00-001-ICD-001"
      relationship: spawns
      trigger_condition: "Upon REQ-001 baseline"
      status: PLANNED
      notes: "Interface control document for fuel system"
    
    - target_knu_id: "KNU-28-00-001-ANA-001"
      relationship: spawns
      trigger_condition: "Upon REQ-001 baseline"
      status: PLANNED
      notes: "Fuel system trade studies and analysis"
    
    - target_knu_id: "KNU-28-10-001-REQ-001"
      relationship: refines_to
      trigger_condition: "Upon REQ-001 approval"
      status: PLANNED
      notes: "LH₂ storage subsystem requirements"
    
    - target_knu_id: "KNU-28-20-001-REQ-001"
      relationship: refines_to
      trigger_condition: "Upon REQ-001 approval"
      status: PLANNED
      notes: "Fuel distribution subsystem requirements"
    
    - target_knu_id: "KNU-28-30-001-REQ-001"
      relationship: refines_to
      trigger_condition: "Upon REQ-001 approval"
      status: PLANNED
      notes: "Fuel dump subsystem requirements"
    
    - target_knu_id: "KNU-28-40-001-REQ-001"
      relationship: refines_to
      trigger_condition: "Upon REQ-001 approval"
      status: PLANNED
      notes: "Fuel indication subsystem requirements"
  
  execution_log:
    - timestamp_utc: "2026-01-16T19:10:00Z"
      event_type: CREATED
      actor: "STK_SE"
      description: "Initial draft created from KNOT-28-00-001 problem statement"
    
    - timestamp_utc: "2026-01-16T19:10:00Z"
      event_type: SPAWNED
      actor: "STK_SE"
      description: "Spawned KNU-28-00-001-SAF-001 for safety analysis"

# ─────────────────────────────────────────────────────────────────────────────
# Traceability Links
# ─────────────────────────────────────────────────────────────────────────────
traceability:
  upstream:
    - ref_id: "KNOT-28-00-001"
      ref_type: KNOT
      description: "General Requirements problem statement"
    
    - ref_id: "O-KNOT-28-00-001"
      ref_type: O-KNOT
      description: "Organizational fuel system requirements"
    
    - ref_id: "Y-KNOT-28-00-001-001"
      ref_type: Y-KNOT
      description: "Fuel system genesis provenance and heritage analysis"
    
    - ref_id: "CS-25.951"
      ref_type: STANDARD
      description: "Fuel System - General"
    
    - ref_id: "CS-25.952"
      ref_type: STANDARD
      description: "Fuel System Crash Resistance"
    
    - ref_id: "CS-25.954"
      ref_type: STANDARD
      description: "Fuel System Lightning Protection"
    
    - ref_id: "CS-25.963"
      ref_type: STANDARD
      description: "Fuel Tanks - General"
    
    - ref_id: "CS-25.981"
      ref_type: STANDARD
      description: "Fuel Tank Ignition Prevention"
    
    - ref_id: "SAE AIR6464"
      ref_type: STANDARD
      description: "Hydrogen Fuel Storage and Distribution for Aircraft"
    
    - ref_id: "SAE AS6858"
      ref_type: STANDARD
      description: "Hydrogen Fuel System Safety Requirements"
    
    - ref_id: "ISO 19880"
      ref_type: STANDARD
      description: "Gaseous Hydrogen Fueling Stations"
    
    - ref_id: "KNU-00-00-005-REQ-001"
      ref_type: KNU
      description: "Unit System Requirements (cryogenic temperature conventions)"
  
  downstream:
    - ref_id: "KNU-28-00-001-SAF-001"
      ref_type: KNU
      description: "Fuel system safety analysis (FMEA, FHA, SSA)"
    
    - ref_id: "KNU-28-00-001-ICD-001"
      ref_type: KNU
      description: "Fuel system interface control document"
    
    - ref_id: "KNU-28-00-001-ANA-001"
      ref_type: KNU
      description: "Fuel system trade studies and analysis"
    
    - ref_id: "KNU-28-10-001-REQ-001"
      ref_type: KNU
      description: "LH₂ storage subsystem requirements"
    
    - ref_id: "KNU-28-20-001-REQ-001"
      ref_type: KNU
      description: "Fuel distribution subsystem requirements"
    
    - ref_id: "KNU-28-30-001-REQ-001"
      ref_type: KNU
      description: "Fuel dump subsystem requirements"
    
    - ref_id: "KNU-28-40-001-REQ-001"
      ref_type: KNU
      description: "Fuel indication subsystem requirements"

# ═══════════════════════════════════════════════════════════════════════════════
# End of _derivation.yaml
# ═══════════════════════════════════════════════════════════════════════════════
